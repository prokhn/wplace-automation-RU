(function(){class WPlaceBot{constructor(){this.isRunning=false;this.delay=1000;this.currentPixel=0;this.pixels=[];this.startX=0;this.startY=0;this.canvas=null;this.colorPalette=[];this.selectedColor='#000000'}init(){console.log('üé® WPlace Bot –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!');this.findCanvas();this.findColorPalette();this.createControlPanel()}findCanvas(){const possibleSelectors=['canvas','#canvas','.canvas','[data-testid="canvas"]','canvas[width]','canvas[height]'];for(const selector of possibleSelectors){const element=document.querySelector(selector);if(element){this.canvas=element;console.log('‚úÖ –•–æ–ª—Å—Ç –Ω–∞–π–¥–µ–Ω:',selector);return}}console.error('‚ùå –•–æ–ª—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω')}findColorPalette(){const colorElements=document.querySelectorAll('[style*="background-color"], .color, [data-color], .palette-color');colorElements.forEach(element=>{const bgColor=window.getComputedStyle(element).backgroundColor;if(bgColor&&bgColor!=='rgba(0, 0, 0, 0)'){this.colorPalette.push({element:element,color:bgColor})}});console.log(`‚úÖ –ù–∞–π–¥–µ–Ω–æ ${this.colorPalette.length} —Ü–≤–µ—Ç–æ–≤ –≤ –ø–∞–ª–∏—Ç—Ä–µ`)}rgbToHex(rgb){const result=rgb.match(/\d+/g);if(!result)return'#000000';const[r,g,b]=result.map(num=>parseInt(num));return'#'+((1<<24)+(r<<16)+(g<<8)+b).toString(16).slice(1)}findClosestColor(targetColor){if(this.colorPalette.length===0)return null;let closestColor=this.colorPalette[0];let minDistance=Infinity;const target=this.hexToRgb(targetColor);if(!target)return closestColor;this.colorPalette.forEach(paletteColor=>{const rgb=this.rgbStringToObject(paletteColor.color);if(rgb){const distance=Math.sqrt(Math.pow(target.r-rgb.r,2)+Math.pow(target.g-rgb.g,2)+Math.pow(target.b-rgb.b,2));if(distance<minDistance){minDistance=distance;closestColor=paletteColor}}});return closestColor}hexToRgb(hex){const result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null}rgbStringToObject(rgb){const result=rgb.match(/\d+/g);if(!result||result.length<3)return null;return{r:parseInt(result[0]),g:parseInt(result[1]),b:parseInt(result[2])}}selectColor(color){const closestColor=this.findClosestColor(color);if(closestColor&&closestColor.element){closestColor.element.click();this.selectedColor=color;console.log(`üé® –í—ã–±—Ä–∞–Ω —Ü–≤–µ—Ç: ${color}`);return true}return false}clickCanvas(x,y){if(!this.canvas)return false;const rect=this.canvas.getBoundingClientRect();const canvasX=x+rect.left;const canvasY=y+rect.top;const events=['mousedown','mouseup','click'];events.forEach(eventType=>{const event=new MouseEvent(eventType,{bubbles:true,cancelable:true,clientX:canvasX,clientY:canvasY,button:0});this.canvas.dispatchEvent(event)});console.log(`üñ±Ô∏è –ö–ª–∏–∫ –ø–æ (${x}, ${y})`);return true}loadSimpleImage(imageData,width,height){this.pixels=[];for(let y=0;y<height;y++){for(let x=0;x<width;x++){const index=y*width+x;if(index<imageData.length){this.pixels.push({x:x,y:y,color:imageData[index]})}}}console.log(`üì∑ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ: ${width}x${height} –ø–∏–∫—Å–µ–ª–µ–π`)}loadHeartImage(){const heart=['‚¨ú','üü•','üü•','‚¨ú','üü•','üü•','‚¨ú','üü•','üü•','üü•','üü•','üü•','üü•','üü•','üü•','üü•','üü•','üü•','üü•','üü•','üü•','üü•','üü•','üü•','üü•','üü•','üü•','üü•','‚¨ú','üü•','üü•','üü•','üü•','üü•','‚¨ú','‚¨ú','‚¨ú','üü•','üü•','üü•','‚¨ú','‚¨ú','‚¨ú','‚¨ú','‚¨ú','üü•','‚¨ú','‚¨ú','‚¨ú'];const colorMap={'üü•':'#FF0000','‚¨ú':'#FFFFFF'};const imageData=heart.map(emoji=>colorMap[emoji]||'#FFFFFF');this.loadSimpleImage(imageData,7,7)}loadSmileyImage(){const smiley=['‚¨ú','‚¨ú','üü®','üü®','üü®','‚¨ú','‚¨ú','‚¨ú','üü®','üü®','üü®','üü®','üü®','‚¨ú','üü®','üü®','‚¨õ','üü®','‚¨õ','üü®','üü®','üü®','üü®','üü®','üü®','üü®','üü®','üü®','üü®','‚¨õ','üü®','üü®','üü®','‚¨õ','üü®','‚¨ú','üü®','‚¨õ','‚¨õ','‚¨õ','üü®','‚¨ú','‚¨ú','‚¨ú','üü®','üü®','üü®','‚¨ú','‚¨ú'];const colorMap={'üü®':'#FFFF00','‚¨õ':'#000000','‚¨ú':'#FFFFFF'};const imageData=smiley.map(emoji=>colorMap[emoji]||'#FFFFFF');this.loadSimpleImage(imageData,7,7)}async start(){if(this.isRunning){console.log('‚ö†Ô∏è –ë–æ—Ç —É–∂–µ –∑–∞–ø—É—â–µ–Ω!');return}if(this.pixels.length===0){console.log('‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ!');return}this.isRunning=true;this.currentPixel=0;console.log('üöÄ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω!');while(this.isRunning&&this.currentPixel<this.pixels.length){const pixel=this.pixels[this.currentPixel];const x=this.startX+pixel.x;const y=this.startY+pixel.y;if(this.selectColor(pixel.color)){await this.sleep(200);this.clickCanvas(x,y);console.log(`‚úÖ –ü–∏–∫—Å–µ–ª—å ${this.currentPixel+1}/${this.pixels.length}`)}this.currentPixel++;await this.sleep(this.delay)}this.isRunning=false;console.log('‚úÖ –ë–æ—Ç –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É!')}stop(){this.isRunning=false;console.log('‚èπÔ∏è –ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!')}sleep(ms){return new Promise(resolve=>setTimeout(resolve,ms))}setStartPosition(x,y){this.startX=x;this.startY=y;console.log(`üìç –ü–æ–∑–∏—Ü–∏—è: (${x}, ${y})`)}setDelay(ms){this.delay=ms;console.log(`‚è±Ô∏è –ó–∞–¥–µ—Ä–∂–∫–∞: ${ms}–º—Å`)}createControlPanel(){const existingPanel=document.getElementById('wplace-bot-panel');if(existingPanel)existingPanel.remove();const panel=document.createElement('div');panel.id='wplace-bot-panel';panel.style.cssText='position:fixed;top:10px;right:10px;background:#2c2c2c;color:white;padding:15px;border-radius:8px;font-family:Arial;font-size:12px;z-index:10000;width:250px;box-shadow:0 4px 8px rgba(0,0,0,0.3)';panel.innerHTML='<h3 style="margin:0 0 10px 0;color:#4CAF50">üé® WPlace Bot</h3><div style="margin-bottom:10px"><label>X: <input type="number" id="startX" value="100" style="width:60px"></label> <label>Y: <input type="number" id="startY" value="100" style="width:60px"></label></div><div style="margin-bottom:10px"><label>–ó–∞–¥–µ—Ä–∂–∫–∞: <input type="number" id="delay" value="1000" style="width:80px">–º—Å</label></div><div style="margin-bottom:10px"><button id="loadHeart">‚ù§Ô∏è</button> <button id="loadSmiley">üòä</button></div><div style="margin-bottom:10px"><button id="startBot" style="background:#4CAF50;color:white;border:none;padding:8px;border-radius:4px;margin-right:5px">‚ñ∂Ô∏è</button> <button id="stopBot" style="background:#f44336;color:white;border:none;padding:8px;border-radius:4px">‚èπÔ∏è</button></div><div id="status" style="font-size:11px;color:#ccc">–ì–æ—Ç–æ–≤–æ</div>';document.body.appendChild(panel);document.getElementById('startX').addEventListener('input',e=>this.setStartPosition(parseInt(e.target.value)||0,this.startY));document.getElementById('startY').addEventListener('input',e=>this.setStartPosition(this.startX,parseInt(e.target.value)||0));document.getElementById('delay').addEventListener('input',e=>this.setDelay(parseInt(e.target.value)||1000));document.getElementById('loadHeart').addEventListener('click',()=>{this.loadHeartImage();document.getElementById('status').textContent='–°–µ—Ä–¥—Ü–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ'});document.getElementById('loadSmiley').addEventListener('click',()=>{this.loadSmileyImage();document.getElementById('status').textContent='–°–º–∞–π–ª–∏–∫ –∑–∞–≥—Ä—É–∂–µ–Ω'});document.getElementById('startBot').addEventListener('click',()=>{this.start();document.getElementById('status').textContent='–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...'});document.getElementById('stopBot').addEventListener('click',()=>{this.stop();document.getElementById('status').textContent='–û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω'})}}window.wplaceBot=new WPlaceBot();window.wplaceBot.init();console.log('üé® WPlace Bot –∑–∞–≥—Ä—É–∂–µ–Ω! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–Ω–µ–ª—å –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É.')})();
